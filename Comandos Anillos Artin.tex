
\def\subnormeq{\mathrel{\scalerel*{\trianglelefteq}{A}}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\La}{\mathscr{L}}
\newcommand{\crdnlty}[1]{
	\left|#1\right|
}
\newcommand{\lrprth}[1]{
	\left(#1\right)
}
\newcommand{\lrbrack}[1]{
	\left\{#1\right\}
}
\newcommand{\descset}[3]{
	\left\{#1\in#2\ \vline\ #3\right\}
}
\newcommand{\descapp}[6]{
	#1: #2 &\rightarrow #3\\
	#4 &\mapsto #5#6 
}
\newcommand{\arbtfam}[3]{
	{\left\{{#1}_{#2}\right\}}_{#2\in #3}
}
\newcommand{\arbtfmnsub}[3]{
	{\left\{{#1}\right\}}_{#2\in #3}
}
\newcommand{\fntfmnsub}[3]{
	{\left\{{#1}\right\}}_{#2=1}^{#3}
}
\newcommand{\fntfam}[3]{
	{\left\{{#1}_{#2}\right\}}_{#2=1}^{#3}
}
\newcommand{\fntfamsup}[4]{
	\lrbrack{{#1}^{#2}}_{#3=1}^{#4}
}
\newcommand{\arbtuple}[3]{
	{\left({#1}_{#2}\right)}_{#2\in #3}
}
\newcommand{\fntuple}[3]{
	{\left({#1}_{#2}\right)}_{#2=1}^{#3}
}
\newcommand{\gengroup}[1]{
	\left< #1\right>
}
\newcommand{\stblzer}[2]{
	St_{#1}\lrprth{#2}
}
\newcommand{\cmmttr}[1]{
	\left[#1,#1\right]
}
\newcommand{\grpindx}[2]{
	\left[#1:#2\right]
}
\newcommand{\syl}[2]{
	Syl_{#1}\lrprth{#2}
}
\newcommand{\grtcd}[2]{
	mcd\lrprth{#1,#2}
}
\newcommand{\lsttcm}[2]{
	mcm\lrprth{#1,#2}
}
\newcommand{\amntpSyl}[2]{
	\mu_{#1}\lrprth{#2}
}
\newcommand{\gen}[1]{
	gen\lrprth{#1}
}
\newcommand{\ringcenter}[1]{
	C\lrprth{#1}
}
\newcommand{\zend}[2]{
	End_{\mathbb{Z}}^{#2}\lrprth{#1}
}
\newcommand{\genmod}[2]{
	\left< #1\right>_{#2}
}
\newcommand{\genlin}[1]{
	\mathscr{L}\lrprth{#1}
}
\newcommand{\opst}[1]{
	{#1}^{op}
}
\newcommand{\ringmod}[3]{
	\if#3l
	{}_{#1}#2
	\else
	\if#3r
	#2_{#1}
	\fi
	\fi
}
\newcommand{\ringbimod}[4]{
	\if#4l
	{}_{#1-#2}#3
	\else
	\if#4r
	#3_{#1-#2}
	\else 
	\ifstrequal{#4}{lr}{
		{}_{#1}#3_{#2}
	}
	\fi
	\fi
}
\newcommand{\ringmodhom}[3]{
	Hom_{#1}\lrprth{#2,#3}
}

\ExplSyntaxOn

\NewDocumentCommand{\functor}{O{}m}
{
	\group_begin:
	\keys_set:nn {nicolas/functor}{#2}
	\nicolas_functor:n {#1}
	\group_end:
}

\keys_define:nn {nicolas/functor}
{
	name     .tl_set:N = \l_nicolas_functor_name_tl,
	dom   .tl_set:N = \l_nicolas_functor_dom_tl,
	codom .tl_set:N = \l_nicolas_functor_codom_tl,
	arrow      .tl_set:N = \l_nicolas_functor_arrow_tl,
	source   .tl_set:N = \l_nicolas_functor_source_tl,
	target   .tl_set:N = \l_nicolas_functor_target_tl,
	Farrow      .tl_set:N = \l_nicolas_functor_Farrow_tl,
	Fsource   .tl_set:N = \l_nicolas_functor_Fsource_tl,
	Ftarget   .tl_set:N = \l_nicolas_functor_Ftarget_tl,	
	delimiter .tl_set:N= \_nicolas_functor_delimiter_tl,	
}

\dim_new:N \g_nicolas_functor_space_dim

\cs_new:Nn \nicolas_functor:n
{
	\begin{tikzcd}[ampersand~replacement=\&,#1]
		\dim_gset:Nn \g_nicolas_functor_space_dim {\pgfmatrixrowsep}		
		\l_nicolas_functor_dom_tl
		\arrow[r,"\l_nicolas_functor_name_tl"] \&
		\l_nicolas_functor_codom_tl
		\\[\dim_eval:n {1ex-\g_nicolas_functor_space_dim}]
		\l_nicolas_functor_source_tl
		\xrightarrow{\l_nicolas_functor_arrow_tl}
		\l_nicolas_functor_target_tl
		\arrow[r,mapsto] \&
		\l_nicolas_functor_Fsource_tl
		\xrightarrow{\l_nicolas_functor_Farrow_tl}
		\l_nicolas_functor_Ftarget_tl
		\_nicolas_functor_delimiter_tl
	\end{tikzcd}
}
\ExplSyntaxOff

\theoremstyle{definition}
\newtheorem{define}{Definici√≥n}
\newtheorem{lem}{Lema}
\newtheorem{teo}{Teorema}